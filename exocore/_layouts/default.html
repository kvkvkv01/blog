<!DOCTYPE html>
{% include head-custom.html %}
<html lang="{{ page.lang | default: site.lang | default: "en-US" }}">
  <body>
      {{ content }}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add('.post-content h2, h3, h4, h5, h6');</script>
    <!-- mathjax config similar to math.stackexchange -->
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          displayMath: [['$$', '$$'], ['\\[', '\\]']]
        }
      };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <!-- Load jQuery first -->
    <script src="{{ site.baseurl }}/assets/js/jquery.min.js"></script>
    
    <!-- Load GW object first -->
    <script src="{{ site.baseurl }}/assets/js/gw.js"></script>
    
    <!-- Load Extracts first since other scripts depend on it -->
    <script src="{{ site.baseurl }}/assets/js/extracts.js"></script>
    
    <!-- Load remaining scripts -->
    <script src="{{ site.baseurl }}/assets/js/annotations.js"></script>
    <script src="{{ site.baseurl }}/assets/js/collapse.js"></script>
    <script src="{{ site.baseurl }}/assets/js/embeder.js"></script>
    <script src="{{ site.baseurl }}/assets/js/extracts-annotations.js"></script>
    <script src="{{ site.baseurl }}/assets/js/extracts-content.js"></script>
    <script src="{{ site.baseurl }}/assets/js/extracts-load.js"></script>
    <script src="{{ site.baseurl }}/assets/js/extracts-options.js"></script>
    <script src="{{ site.baseurl }}/assets/js/image-focus.js"></script>
    <script src="{{ site.baseurl }}/assets/js/popins.js"></script>
    <script src="{{ site.baseurl }}/assets/js/popups.js"></script>
    <script src="{{ site.baseurl }}/assets/js/sidenotes.js"></script>
    <script src="{{ site.baseurl }}/assets/js/tablesorter.js"></script>
    <script src="{{ site.baseurl }}/assets/js/transclude.js"></script>
    <script src="{{ site.baseurl }}/assets/js/typography.js"></script>
    
    <script type="text/javascript">
      //hack: remove <p> tags from images in tables 
      document.querySelectorAll("td").forEach(t => {
        if (t.textContent.endsWith("</p>")) {
          // t.textContent = t.textContent.substring(0, t.textContent.length-3)
          // note to self: make this work by setting text color to td background color
          // if textContent begins with / ends with escaped p element 
        }
      });
    </script>
  </body>
</html>