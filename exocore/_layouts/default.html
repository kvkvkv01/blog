<!DOCTYPE html>
{% include head-custom.html %}
<html lang="{{ page.lang | default: site.lang | default: "en-US" }}">
  <head>
    <!-- Add sidenotes CSS -->
    <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/sidenotes.css">
  </head>
  <body>
      {{ content }}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add('.post-content h2, h3, h4, h5, h6');</script>
    <!-- mathjax config similar to math.stackexchange -->
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          displayMath: [['$$', '$$'], ['\\[', '\\]']]
        }
      };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <!-- Load jQuery first -->
    <script src="{{ site.baseurl }}/assets/js/jquery.min.js"></script>
    
    <!-- Add sidenotes JavaScript -->
    <script src="{{ site.baseurl }}/assets/js/sidenotes.js"></script>
    <!-- Sidenotes will be automatically initialized when the DOM is ready -->

    <script type="text/javascript">
      //hack: remove <p> tags from images in tables 
      document.querySelectorAll("td").forEach(t => {
        if (t.textContent.endsWith("</p>")) {
          // t.textContent = t.textContent.substring(0, t.textContent.length-3)
          // note to self: make this work by setting text color to td background color
          // if textContent begins with / ends with escaped p element 
        }
      });
    </script>
  </body>
</html>